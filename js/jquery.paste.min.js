(function(){var c,b,a;c=jQuery;a=function(e,d){return setTimeout((function(){return c(e).find("img").each(function(g,f){return b(f.src,d)})}),1)};b=function(f,e){var d;d=new Image();d.onload=function(){var h,g,j;h=document.createElement("canvas");h.width=d.width;h.height=d.height;g=h.getContext("2d");g.drawImage(d,0,0,h.width,h.height);j=null;try{j=h.toDataURL("image/png")}catch(i){}if(j){return e({dataURL:j,width:d.width,height:d.height})}};return d.src=f};c.paste=function(){var d;d=document.createElement("div");d.contentEditable=true;c(d).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"}).on("paste",function(m){var e,p,k,o,i,n,j,h,g,f,l=this;if(((j=m.originalEvent)!=null?j.clipboardData:void 0)!=null){e=m.originalEvent.clipboardData;if(e.items){h=e.items;for(i=0,n=h.length;i<n;i++){p=h[i];if(p.type.match(/^image\//)){k=new FileReader();k.onload=function(q){return b(q.target.result,function(r){return c(d).trigger("pasteImage",r)})};k.readAsDataURL(p.getAsFile())}if(p.type==="text/plain"){p.getAsString(function(q){return c(d).trigger("pasteText",{text:q})})}}}else{if(e.types.length){if((g=(o=e.getData("Text")))!=null?g.length:void 0){c(d).trigger("pasteText",{text:o})}}else{a(d,function(q){return c(d).trigger("pasteImage",q)})}}}if(e=window.clipboardData){if((f=(o=e.getData("Text")))!=null?f.length:void 0){c(d).trigger("pasteText",{text:o})}else{a(d,function(q){return c(d).trigger("pasteImage",q)})}}return setTimeout((function(){return c(d).html("")}),2)});return c(d)}}).call(this);
